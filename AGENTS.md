# è³‡æ–™åº«é·ç§»å·¥å…· - AI é–‹ç™¼æŒ‡å—

## å°ˆæ¡ˆæ¦‚è¿°

é€™æ˜¯ä¸€å€‹ **æ¡Œé¢æ‡‰ç”¨ç¨‹å¼**ï¼Œç”¨æ–¼å°‡ MSSQL è³‡æ–™åº«é·ç§»åˆ°å¤šç¨®ç›®æ¨™è³‡æ–™åº«ï¼ˆPostgreSQLã€MySQLã€Oracleã€MSSQLï¼‰ï¼ŒåŒ…å« schema è½‰æ›ã€è³‡æ–™é·ç§»å’Œé©—è­‰åŠŸèƒ½ã€‚

## æŠ€è¡“æ¶æ§‹

| å±¤ç´š | æŠ€è¡“ | èªªæ˜ |
|------|------|------|
| æ¡Œé¢æ¡†æ¶ | **Wails v2** | Go + Web UIï¼Œç·¨è­¯æˆå–®ä¸€åŸ·è¡Œæª” |
| å¾Œç«¯ | **Go** | è³‡æ–™åº«æ“ä½œã€é·ç§»é‚è¼¯ |
| å‰ç«¯ | **React 19 + TypeScript** | UI ä»‹é¢ |
| ç‹€æ…‹ç®¡ç† | **Zustand** | è¼•é‡ç´šç‹€æ…‹ç®¡ç† |
| æœ¬åœ°å„²å­˜ | **SQLite** | é·ç§»æ­·å²ã€æ—¥èªŒï¼ˆä½¿ç”¨ modernc.org/sqliteï¼Œç´” Go ç„¡ CGOï¼‰|

## å°ˆæ¡ˆçµæ§‹

```
MssqlToPosgresql/
â”œâ”€â”€ app.go                      # Wails ä¸»æ‡‰ç”¨ï¼Œæš´éœ² Go æ–¹æ³•çµ¦å‰ç«¯
â”œâ”€â”€ main.go                     # ç¨‹å¼é€²å…¥é»
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ connection/             # è³‡æ–™åº«é€£ç·š
â”‚   â”‚   â”œâ”€â”€ mssql.go           # MSSQL é€£ç·šï¼ˆä¾†æºï¼‰
â”‚   â”‚   â””â”€â”€ postgres.go        # PostgreSQL é€£ç·šï¼ˆç›®æ¨™ï¼‰
â”‚   â”œâ”€â”€ migration/              # é·ç§»å¼•æ“
â”‚   â”‚   â””â”€â”€ engine.go          # æ ¸å¿ƒé·ç§»é‚è¼¯
â”‚   â”œâ”€â”€ schema/
â”‚   â”‚   â””â”€â”€ converter/
â”‚   â”‚       â””â”€â”€ type_mapper.go # é¡å‹æ˜ å°„
â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â””â”€â”€ sqlite.go          # æœ¬åœ° SQLite å„²å­˜
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ types.go           # å…±ç”¨é¡å‹å®šç¾©
â”‚   â””â”€â”€ validation/             # é©—è­‰åŠŸèƒ½
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ pages/
â”‚       â”‚   â”œâ”€â”€ Home.tsx       # é¦–é 
â”‚       â”‚   â”œâ”€â”€ Connection.tsx # é€£ç·šç®¡ç†
â”‚       â”‚   â”œâ”€â”€ Migration.tsx  # é·ç§»é é¢ï¼ˆä¸»è¦åŠŸèƒ½ï¼‰
â”‚       â”‚   â””â”€â”€ Validation.tsx # é©—è­‰é é¢
â”‚       â”œâ”€â”€ stores/
â”‚       â”‚   â”œâ”€â”€ connectionStore.ts
â”‚       â”‚   â””â”€â”€ migrationStore.ts
â”‚       â””â”€â”€ types/
â”‚           â””â”€â”€ index.ts       # TypeScript é¡å‹
â””â”€â”€ build/bin/                  # ç·¨è­¯è¼¸å‡º
```

## é€£ç·šå­—ä¸²æ ¼å¼

**çµ±ä¸€ä½¿ç”¨ URI æ ¼å¼ï¼š**

```
# MSSQLï¼ˆä¾†æºï¼‰
sqlserver://username:password@host:port?database=dbname
```

å„ç›®æ¨™ DB çš„é€£ç·šæ ¼å¼è«‹åƒè€ƒå°æ‡‰çš„ skillï¼ˆ`/postgresql`ã€`/mysql`ã€`/oracle` ç­‰ï¼‰ã€‚

## æ ¸å¿ƒåŠŸèƒ½èˆ‡é€²åº¦

### å·²å®Œæˆ âœ…

1. **é€£ç·šç®¡ç†** - æ¸¬è©¦é€£ç·šã€å„²å­˜é€£ç·šæ­·å²
2. **Schema é·ç§»** - è¡¨æ ¼çµæ§‹ã€ä¸»éµã€ç´¢å¼•è½‰æ›
3. **è³‡æ–™é·ç§»** - æ‰¹æ¬¡è™•ç†ã€é«˜æ•ˆæ’å…¥
4. **è¡¨æ ¼æ’åº** - UI æ‹–æ›³èª¿æ•´é·ç§»é †åºï¼ˆè‡³é ‚/è‡³å°¾æŒ‰éˆ•ï¼‰
5. **é¡å‹æ˜ å°„** - è‡ªå‹•è½‰æ›

### å¾…å®Œæˆ ğŸ”²

1. **é©—è­‰åŠŸèƒ½** - ç­†æ•¸é©—è­‰ã€Checksum é©—è­‰
2. **View/SP é·ç§»** - è¦–åœ–ã€é å­˜ç¨‹åºè½‰æ›
3. **éŒ¯èª¤è™•ç†å„ªåŒ–** - æ›´å®Œå–„çš„éŒ¯èª¤è¨Šæ¯
4. **å¤šç›®æ¨™ DB æ”¯æ´** - MySQLã€Oracleã€MSSQL ä½œç‚ºç›®æ¨™

## é—œéµç¨‹å¼ç¢¼ä½ç½®

| åŠŸèƒ½ | æª”æ¡ˆ | èªªæ˜ |
|------|------|------|
| é·ç§»é †åºé‚è¼¯ | `internal/migration/engine.go` â†’ `getTablestoMigrate()` | æŒ‰ IncludeTables é †åºé·ç§» |
| é¡å‹æ˜ å°„ | `internal/schema/converter/type_mapper.go` | ä¾†æº â†’ ç›®æ¨™é¡å‹è½‰æ› |
| å‰ç«¯é·ç§»é  | `frontend/src/pages/Migration.tsx` | æ‹–æ›³æ’åºã€é–‹å§‹é·ç§» |
| å‰ç«¯ç‹€æ…‹ | `frontend/src/stores/migrationStore.ts` | Zustand store |

## é–‹ç™¼å‘½ä»¤

```bash
# é–‹ç™¼å»ºç½®ï¼ˆå« debugï¼‰
wails build -debug -o AdaruDbTool.exe

# åŸ·è¡Œæ¸¬è©¦
go test ./...

# å‰ç«¯é–‹ç™¼
cd frontend && npm run dev
```

## è¨­è¨ˆæ±ºç­–

1. **é·ç§»é †åº**ï¼šæŒ‰ç…§å‰ç«¯ UI æ‹–æ›³å¾Œçš„é †åºåŸ·è¡Œï¼Œä¸è‡ªå‹•æ’åº
2. **é€£ç·šå­—ä¸²**ï¼šçµ±ä¸€ä½¿ç”¨ URI æ ¼å¼ï¼ˆè·¨å¹³å°ç›¸å®¹ï¼‰
3. **SQLite é©…å‹•**ï¼šä½¿ç”¨ç´” Go ç‰ˆæœ¬ï¼ˆmodernc.org/sqliteï¼‰ï¼Œé¿å… CGO ä¾è³´

## æ¸¬è©¦é€£ç·šï¼ˆé–‹ç™¼ç”¨ï¼‰

```
# MSSQL
sqlserver://sa:html5!its@192.168.100.141:1436?database=LineCRM.CarCareSit

# PostgreSQL
postgres://itsower:html5!its@localhost:5432/LineCRM.CarCare?sslmode=disable
```

## ç›¸é—œæ–‡ä»¶

- `Note.md` - æŠ€è¡“ç­†è¨˜ã€è³‡æ–™åŒ¯å‡ºé †åº
- `plan.md` - åŸå§‹å°ˆæ¡ˆè¨ˆç•«
- `Script.md` - SQL è…³æœ¬åƒè€ƒ

## å›æ‡‰èªè¨€

ç¹é«”ä¸­æ–‡
